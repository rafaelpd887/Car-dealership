---
title: "Qual o melhor estado para se comprar carros que ainda estejam dentro da garantia de fábrica e por quê?"
author: "Rafael"
date: "2023-07-15"
output: html_document
---
# Carregando pacotes e dataset
```{r package, message=FALSE, results='hide'}
pacotes <- c("readxl", "dplyr", "PerformanceAnalytics" )
lapply(pacotes, library, character.only = TRUE)
```
```{r load}
cars_train <- read_excel("cars_train.xlsx")
```

# Análises
Usando `table` para olhar as frequências da variável "garantia_de_fábrica":
```{r table}
table(cars_train$garantia_de_fábrica)
```
.
## Criando um novo dataset apenas com os carros que ainda possuem garantia de fábrica: 
```{r garantia}
garantia <- filter(cars_train, garantia_de_fábrica %in% c("Garantia de fábrica"))
```

## Calculando o volume de vendas em cada "estado_vendedor"
```{r vendas}
vendas_por_estado <- garantia %>%
  group_by(estado_vendedor) %>%
  summarize(volume_vendas = n()) %>%
  arrange(desc(volume_vendas))
print(vendas_por_estado, n = Inf)
```

## Obtendo o menor preço para cada "estado_vendedor"
```{r vendas2}
menor_preco_por_estado <- garantia %>%
  group_by(estado_vendedor) %>%
  summarize(menor_preco = min(preco)) %>%
arrange(menor_preco)
print(menor_preco_por_estado, n = Inf)
```

## Calculando o desvio padrão para cada "estado_vendedor"
```{r vendas3}
desvio_padrao_por_estado <- garantia %>%
  group_by(estado_vendedor) %>%
  summarize(desvio_padrao = sd(preco)) %>%
arrange(desc(desvio_padrao))
print(desvio_padrao_por_estado, n = Inf)
```

## Calculando o preço médio de venda para cada "estado_vendedor"
```{r preço}
preco_medio_por_estado <- garantia %>%
  group_by(estado_vendedor) %>%
  summarize(preco_medio = mean(preco)) %>%
  arrange(preco_medio)
print(preco_medio_por_estado, n = Inf)
```

#### Mais uma vez, o estado de São Paulo demonstra, de forma geral, métricas interessantes para a compra de carros com garantia de fábrica. Além de possuir o maior volume de observações, São Paulo também apresenta um dos carros com garantia com um dos menores preços.

#### No ranking com a média dos preços dos carros com garantia por estado, São Paulo ocupa a décima terceira posição. No entanto, se considerarmos apenas os cinco estados com a maior quantidade de carros com garantia, São Paulo estaria em primeiro lugar. Já o desvio-padrão indica que São Paulo possui uma variabilidade mediana nos preços em comparação com os outros estados.

#### Essas métricas indicam que, com base nos dados analisados, São Paulo é o estado mais propício para a compra de carros com garantia de fábrica. É onde encontraríamos o maior número de opções disponíveis, além de possuir um preço médio razoável. O grande número de observações e o desvio padrão de amplitude razoável indicam que o comprador teria boas chances de encontrar oportunidades a preços baixos, desde que esteja disposto a procurá-las.

#### É importante ressaltar que essa análise foi realizada apenas com as observações que possuíam a categoria "Garantia de fábrica" na variável qualitativa "garantia_de_fábrica".