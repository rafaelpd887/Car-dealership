---
title: "Excluindo São Paulo, qual o melhor estado para se vender sedãs de 4 portas automáticos da Chevrolet?"
author: "Rafael"
date: "2023-07-15"
output: html_document
---
# Carregando pacotes e dataset
```{r package, message=FALSE, results='hide'}
pacotes <- c("readxl", "dplyr", "ggplot2")
lapply(pacotes, library, character.only = TRUE)
```
```{r load}
cars_train <- read_excel("cars_train.xlsx")
```

# Análises
Olhando os dez estados com os maiores volumes de vendas para sedãs automáticos de 4 portas da Chevrolet:
```{r table}
top_10_estados <- cars_train %>%
  filter(marca == "CHEVROLET" & cambio == "Automática" & tipo == "Sedã" & num_portas == 4) %>%
  group_by(estado_vendedor) %>%
  summarize(total_vendas = n()) %>%
  arrange(desc(total_vendas)) %>%
  head(10)
top_10_estados
```

## Calculando a média dos preços dos sedãs automáticos de 4 portas da Chevrolet para os estados com os maiores volumes de vendas:
```{r media, warning=FALSE}
media_precos_estados <- top_10_estados %>%
  left_join(select(cars_train, estado_vendedor, preco), by = "estado_vendedor") %>%
  group_by(estado_vendedor) %>%
  summarize(media_preco = mean(preco)) %>%
  arrange(desc(media_preco))
media_precos_estados
```

## Fazendo um gráfico boxplot dos preços em relação aos estados com maiores volumes de vendas:
```{r box}
siglas_estados <- c("BA", "GO", "MG", "PB", "PR", "PE", "RJ", "RS", "SC", "SP" )
carros_top_10 <- cars_train %>%
  filter(estado_vendedor %in% top_10_estados$estado_vendedor)
ggplot(carros_top_10, aes(x = estado_vendedor, y = preco)) +
  geom_boxplot() +
  labs(title = "Boxplot dos Preços por Estado (Top 10 Estados)",
       x = "Estado",
       y = "Preço") +
  scale_x_discrete(labels = siglas_estados) +
  scale_y_continuous(labels = scales::comma, breaks = c(250000, 500000, 750000, 1000000))
```

### Considerando as análises realizadas, observamos que os estados de São Paulo, Rio de Janeiro e Paraná apresentam os maiores volumes de venda para sedãs de quatro portas automáticos da Chevrolet. No entanto, como parte do objetivo é desconsiderar o estado de São Paulo, os estados do Rio de Janeiro e Paraná parecem se mostram as melhores opções para a venda desses sedãs.

### Ao comparar o Rio de Janeiro e Paraná, verificamos que a média de preços dos carros com essas características é superior no Paraná. Isso indica que o lucro provavelmente seria maior nesse estado. Embora o estado de Goiás apresente uma média de preços mais alta, seu volume de vendas é menos da metade do volume do Paraná. Por esse motivo, o Paraná ainda se mostra como a melhor escolha para a venda de sedãs de quatro portas automáticos da Chevrolet.

### Adicionalmente, o box plot confirma uma média de preços ligeiramente superior, juntamente com uma boa amplitude de preços acima da média. 

### Com base nessas análises, concluímos que o estado do Paraná, excluindo o estado de São Paulo, é a melhor opção para a venda de sedãs de quatro portas automáticos da Chevrolet.

